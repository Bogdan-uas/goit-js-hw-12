{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios'\n\nconst API_KEY = '48185662-a1ecae6a7cb89564c9e1793e1'\n\naxios.defaults.baseURL = 'https://pixabay.com/api/'\n\nexport const fetchImages = async (query, page = 1, perPage = 15) => {\nconst params = new URLSearchParams({\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientaiton: 'horizontal',\n    safesearch: 'true',\n    page: page,\n    per_page: perPage,\n})\n\ntry {\n    const response = await axios.get('', { params })\n    return response\n} catch (error) {\n    throw error\n}\n}","import SimpleLightbox from 'simplelightbox'\nimport 'simplelightbox/dist/simple-lightbox.min.css'\n\nlet lightbox\n\nexport const renderGallery = (images) => {\nconst gallery = document.querySelector('.gallery')\nconst markup = images\n    .map(\n    ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) =>\n        `<div class='photo-card'>\n        <a href=\"${largeImageURL}\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"\"lazy/>\n        </a>\n        <div class=\"info\">\n        <div>\n            <p>Likes</p>\n            <p>${likes}</p>\n        </div>\n        <div>\n            <p>Views</p>\n            <p>${views}</p>\n        </div>\n        <div>\n            <p>Comments</p>\n            <p>${comments}</p>\n        </div>\n        <div>\n            <p>Downloads</p>\n            <p>${downloads}</p>\n        </div>\n        </div>\n    </div>`\n    )\n    .join('')\n\ngallery.insertAdjacentHTML('beforeend', markup)\n\nif (!lightbox) {\n    lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n    })\n} else {\n    lightbox.refresh()\n}\n}\n\nexport const clearGallery = () => {\nconst gallery = document.querySelector('.gallery')\ngallery.innerHTML = ''\n}","import { fetchImages } from './js/pixabay-api'\nimport { renderGallery, clearGallery } from './js/render-functions'\nimport iziToast from 'izitoast'\nimport 'izitoast/dist/css/iziToast.min.css'\n\nconst form = document.querySelector('.search-form')\nconst loader = document.querySelector('.loader')\nconst loadMore = document.querySelector('.load-more')\n\nlet currentPage = 1\nlet currentQuery = ''\nconst perPage = 15\n\nform.addEventListener('submit', onSearch)\nloadMore.addEventListener('click', onLoadMore)\n\nasync function onSearch(e) {\ne.preventDefault()\nconst query = form.elements.search.value.trim()\n\nif (!query) {\n    iziToast.warning({\n    title: 'Warning',\n    message: 'Search query cannot be empty!',\n    position: 'topRight',\n    })\n    return\n}\n\ncurrentQuery = query\ncurrentPage = 1\nclearGallery()\ntoggleLoader(true)\ntoggleLoadMore(false)\n\ntry {\n    const { data } = await fetchImages(currentQuery, currentPage, perPage)\n\n    if (data.hits.length === 0) {\n    iziToast.error({\n        title: 'Error',\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n    })\n    return\n    } else if (currentPage * perPage >= data.totalHits) {\n    toggleLoadMore(false)\n    iziToast.info({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n    })\n    } else toggleLoadMore(true)\n    renderGallery(data.hits)\n} catch (error) {\n    iziToast.error({\n    title: 'Error',\n    message: `Something went wrong: ${error.message}`,\n    position: 'topRight',\n    })\n} finally {\n    toggleLoader(false)\n}\n}\n\nasync function onLoadMore() {\ncurrentPage += 1\n\ntoggleLoadMore(false)\ntoggleLoader(true)\ntry {\n    const { data } = await fetchImages(currentQuery, currentPage, perPage)\n\n    if (currentPage * perPage >= data.totalHits) {\n    toggleLoadMore(false)\n    iziToast.info({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n    })\n    } else toggleLoadMore(true)\n    renderGallery(data.hits)\n    smoothScroll()\n} catch (error) {\n    iziToast.error({\n    title: 'Error',\n    message: `Something went wrong: ${error.message}`,\n    position: 'topRight',\n    })\n} finally {\n    toggleLoader(false)\n}\n}\n\nconst smoothScroll = () => {\nconst galleryCard = document.querySelector('.photo-card')\nif (galleryCard) {\n    window.scrollBy({\n        top: galleryCard.getBoundingClientRect().height * 2,\n    behavior: 'smooth',\n    })\n}\n}\n\nconst toggleLoader = (isLoading) => (loader.style.display = isLoading ? 'block' : 'none')\n\nconst toggleLoadMore = (isDisplaying) => (loadMore.style.display = isDisplaying ? 'block' : 'none')"],"names":["API_KEY","axios","fetchImages","query","page","perPage","params","error","lightbox","renderGallery","images","gallery","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","clearGallery","form","loader","loadMore","currentPage","currentQuery","onSearch","onLoadMore","iziToast","toggleLoader","toggleLoadMore","data","smoothScroll","galleryCard","isLoading","isDisplaying"],"mappings":"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"}